# マインドマップ統合型タスク管理アプリ 要件定義書

## 1. アプリケーション概要

### 1.1 コンセプト
「なぜこのタスクをやっているのか」という目的意識を失わないための、マインドマップ・ToDo・目的管理を統合した**モバイルアプリケーション**。移動中や空き時間に思考を整理し、発想を膨らませることを主目的とする。

### 1.2 コア価値
- **多視点での情報整理**: 同じ情報を「思考の構造(マップ)」と「実行リスト(ToDo)」の両方から見られる
- **多対多の関係性**: 1つのタスクが複数の目的に貢献する現実を反映
- **段階的な情報開示**: 複雑な関係性を一度に見せず、フォーカスした視点から徐々に理解できる
- **モバイルファースト**: 空き時間での思考整理に最適化したUX

### 1.3 対象プラットフォーム
- **iOS** (iPhone/iPad)
- **Android** (スマートフォン/タブレット)
- 将来的にWebブラウザ版も検討

---

## 2. ユーザーストーリー

### 2.1 典型的な利用シーン

#### シーン1: 通勤中に記事を読んで発想
**状況**: 電車内でWebニュース記事を読み、新しいビジネスアイデアを思いつく

**操作フロー**:
1. 記事のURLをアプリに共有(iOSシェアシート/Android共有メニュー)
2. 「ビジネスアイデア」マップを開く
3. 新規ノード作成: タイトル「サブスク型サービス」
4. 詳細に記事URL、要約メモ、思いついた着想を記録
5. 既存の「収益化戦略」ノードの子として配置

**必要機能**:
- マップの複数管理
- ノードへのURL添付・表示
- 外部アプリからの共有受け取り(Share Extension)
- タッチでのドラッグ&ドロップ

---

#### シーン2: カフェでタスクと目的の整理
**状況**: 休憩時間に今週のタスクを見直し、優先順位を再考

**操作フロー**:
1. タスクリストタブを開く
2. タスク「提案書作成」をタップ→全画面詳細表示
3. 関連目的「新規案件獲得」「スキルアップ」を確認
4. 「あれ、これは部署目標の達成にも貢献するな」と気づく
5. 「部署目標」を追加の目的として紐付け
6. タスク一覧に戻ると、そのタスクに「+3目的」バッジが表示

**必要機能**:
- タスク詳細の全画面表示
- 目的の追加・削除(複数選択UI)
- 視覚的なバッジ表示
- スムーズな画面遷移アニメーション

---

#### シーン3: 寝る前にマップを俯瞰して整理
**状況**: 一日の終わりに思考を整理し、明日のタスクを確認

**操作フロー**:
1. マップタブで「今週の目標」マップを開く
2. ピンチジェスチャーでズームアウト→全体を俯瞰
3. 孤立したノード(どのタスクにも紐づいていない)を発見
4. 「これはもう不要だな」と判断して削除
5. または新しいタスクを作成して紐付け

**必要機能**:
- ピンチイン/アウトでのズーム
- 孤立ノード/孤立タスクのハイライト表示
- スムーズなパン操作

---

#### シーン4: 外部参照の保存と活用
**状況**: 調査中に見つけた参考サイトをノードに記録

**操作フロー**:
1. ブラウザでGitHub repositoryを閲覧中
2. 共有メニューから本アプリを選択
3. 既存マップ「技術調査」を選択、または新規マップ作成
4. ノードタイトル自動入力(ページタイトルから)
5. URL、メモを追加して保存
6. 後日マップを見返した際、ノードをタップ→URLリンクから元サイトへジャンプ

**必要機能**:
- Share Extension (iOS) / Intent Filter (Android)
- URL自動抽出・保存
- ノード内リンクのタップでブラウザ起動
- メタデータ(ページタイトル、OGP情報等)の自動取得(オプション)

---

#### シーン5: データバックアップと移行 (必須機能)
**状況**: 新しいデバイスに機種変更、またはPCで分析したい

**操作フロー**:
1. 設定画面から「エクスポート」を選択
2. 形式を選択:
   - **JSON**: 完全なデータ構造(全マップ・ノード・タスク・リンク)
   - **CSV**: 表形式(スプレッドシートで分析可能)
   - **ZIP**: JSONファイル + 添付画像等をまとめて圧縮
3. クラウドストレージ(iCloud/Google Drive)またはメールで送信
4. 新デバイスでアプリをインストール
5. 「インポート」からファイルを選択→データ復元完了

**必要機能 (必須)**:
- **JSON形式エクスポート/インポート**
- **CSV形式エクスポート/インポート**
- **ZIP形式エクスポート/インポート**
- エクスポート時のマップ選択(全体 or 個別マップ)
- インポート時の形式自動判別
- 既存データとの統合 or 上書き選択

---

## 3. データ構造設計

### 3.1 マップ (Map)
複数の思考マップを管理する最上位エンティティ

```typescript
interface Map {
  id: string; // UUID
  title: string; // マップ名 (例: "ビジネスアイデア", "今週の目標")
  description?: string; // マップの説明
  createdAt: number; // タイムスタンプ
  updatedAt: number;
  color?: string; // マップのテーマカラー
  nodeIds: string[]; // このマップに属するノードのID
}
```

---

### 3.2 ノード (Node)
思考・目的・概念を表す基本単位

```typescript
interface Node {
  id: string; // UUID
  mapId: string; // 所属するマップID
  title: string; // 短い見出し・単語
  description: string; // 詳細な内容・コンテキスト
  url?: string; // 参照URL (Webサイト、記事等)
  urlMetadata?: { // URL自動取得情報(オプション)
    pageTitle?: string;
    favicon?: string;
    ogImage?: string;
  };
  type: "concept" | "goal" | "project" | "reference"; // ノード種別
  createdAt: number;
  updatedAt: number;
  position: { x: number; y: number }; // マップ上の座標
  parentNodeIds: string[]; // 親ノード(複数可能)
  childNodeIds: string[]; // 子ノード(複数可能)
  linkedTaskIds: string[]; // 紐づくタスク
  metadata: {
    color?: string; // ノード固有の色
    icon?: string; // emoji
    collapsed?: boolean; // 子ノードの折りたたみ状態
  };
}
```

---

### 3.3 タスク (Task)
具体的なアクション・実行項目

```typescript
interface Task {
  id: string; // UUID
  title: string; // タスクのタイトル
  description?: string; // 詳細説明
  status: "todo" | "in_progress" | "done" | "archived";
  priority: 1 | 2 | 3 | 4 | 5; // 1=最高, 5=最低
  dueDate?: number; // 期限(タイムスタンプ)
  linkedNodeIds: string[]; // 紐づく目的ノード(複数)
  tags: string[]; // タグ
  createdAt: number;
  updatedAt: number;
  completedAt?: number; // 完了日時
}
```

---

### 3.4 リンク (Link)
ノード間、タスク間の関係性を表現

```typescript
interface Link {
  id: string; // UUID
  sourceId: string; // ノードIDまたはタスクID
  targetId: string;
  type: "parent-child" | "reference" | "task-goal";
  weight?: number; // 関係の強さ(オプション、将来の優先度計算用)
  createdAt: number;
}
```

---

### 3.5 データ全体構造

```typescript
interface AppData {
  version: string; // データフォーマットバージョン (例: "1.0.0")
  exportedAt: number; // エクスポート日時
  maps: Map[];
  nodes: Node[];
  tasks: Task[];
  links: Link[];
}
```

---

## 4. UI/UX設計 (モバイル最適化)

### 4.1 画面構成 (タブベース)

#### タブ1: マップビュー
**目的**: 思考の構造・目的の階層を俯瞰

**レイアウト**:
- 上部: マップ選択ドロップダウン + 新規マップボタン
- メイン: 無限キャンバス(ピンチズーム・パン対応)
- 下部: ツールバー(新規ノード追加、フォーカスモード切替、設定)

**ノード表示**:
- デフォルト: タイトルのみ表示(コンパクトカード)
- タップ→全画面詳細ビューへ遷移
- ロングタップ→編集メニュー(移動、削除、リンク追加)

**ジェスチャー**:
- ピンチイン/アウト: ズーム
- ドラッグ: ノード移動 or キャンバスパン(モード切替可能)
- ダブルタップ: ノード詳細を開く

---

#### タブ2: タスクリストビュー
**目的**: 実行すべきタスクの管理

**レイアウト**:
- 上部: フィルタ/ソート (ステータス、優先度、期限、目的別)
- メイン: スクロール可能なタスクリスト
- 下部: 新規タスク追加ボタン

**タスク行の表示**:
```
[✓] タスクタイトル            [優先度★★★]
    期限: 2026/02/15          [+3目的]
```

**タップ挙動**:
- タスク行タップ→全画面詳細ビューへ遷移
- スワイプジェスチャー→完了/削除/アーカイブ

---

#### タブ3: 設定・その他
**内容**:
- データ管理 (エクスポート/インポート) ← **必須機能**
- 外観設定 (ダークモード、カラーテーマ)
- 通知設定
- アプリ情報

---

### 4.2 全画面詳細ビュー (ノード/タスク共通パターン)

**表示原則**: ポップアップではなく、**全画面モーダル**として表示

#### ノード詳細画面
```
┌─────────────────────────┐
│ [×] ノードタイトル      │ ← 閉じるボタン
├─────────────────────────┤
│ 種類: 🎯 目標           │
│ 作成日: 2026/01/15      │
├─────────────────────────┤
│ 詳細説明:               │
│ ここに詳細テキストが    │
│ 複数行で表示される      │
├─────────────────────────┤
│ 参照URL:                │
│ 🔗 https://example.com  │ ← タップでブラウザ起動
├─────────────────────────┤
│ 紐づくタスク (3)        │
│ ☐ タスク①             │ ← タップでタスク詳細へ
│ ☐ タスク②             │
│ ☑ タスク③ (完了)       │
├─────────────────────────┤
│ 親ノード:               │
│ → 上位目的A            │ ← タップでマップジャンプ
├─────────────────────────┤
│ [編集] [削除] [マップ表示]│
└─────────────────────────┘
```

#### タスク詳細画面
```
┌─────────────────────────┐
│ [×] タスクタイトル      │
├─────────────────────────┤
│ ステータス: [進行中▼]  │
│ 優先度: [★★★☆☆]      │
│ 期限: [2026/02/15]     │
├─────────────────────────┤
│ 詳細説明:               │
│ ...                     │
├─────────────────────────┤
│ このタスクが貢献する目的:│ ← 目的を常に表示
│ 🎯 新規案件獲得         │ ← タップでマップジャンプ
│ 📚 スキルアップ         │
│ 📊 部署目標達成         │
│ [+ 目的を追加]          │ ← 多対多の紐付け
├─────────────────────────┤
│ タグ: #重要 #今週中     │
├─────────────────────────┤
│ [保存] [削除]           │
└─────────────────────────┘
```

---

### 4.3 ビュー間の連携フロー

#### マップ→タスクへ
1. マップビューでノードAをタップ→詳細画面
2. 「紐づくタスク」セクションでタスク①をタップ
3. タスク詳細画面へ遷移
4. 戻るボタンでノード詳細→マップへ戻る

#### タスク→マップへ
1. タスクリストでタスク③をタップ→詳細画面
2. 「貢献する目的」セクションで目的Aをタップ
3. マップビューへ遷移&ノードAをハイライト表示
4. ズームアニメーションでノードAを中心に配置

---

### 4.4 多対多の可視化戦略

**原則**: すべての関係を同時に描画しない

#### マップビューでの多対多表現
- デフォルト: 主要な親子関係(ツリー構造)のみ表示
- ノード選択時:
  - 紐づくタスクを詳細パネルに列挙
  - タスクが他のノードにも紐づいている場合、バッジ表示 (例: 「+2」)
- タスクバッジタップ→そのタスクに関連する全ノードをハイライト

#### タスクリストでの多対多表現
- タスク行に「目的タグ」を表示
- 3つまで表示、それ以上は「+N」で省略
- タグタップ→該当ノードにジャンプ

---

## 5. 主要機能仕様

### 5.1 マップ管理
- **作成**: ホーム画面から「新規マップ」ボタン
- **切り替え**: ドロップダウンまたはスワイプジェスチャー
- **削除**: 設定画面から削除(確認ダイアログ表示)
- **並び替え**: ドラッグ&ドロップで順序変更

---

### 5.2 ノード管理
- **作成**: 
  - マップビューの「+」ボタン
  - 既存ノードからの子ノード追加
  - Share Extensionからの自動作成
- **編集**: 
  - タイトル、説明、URL、種別、色の変更
  - インライン編集(タイトル) + 詳細画面での完全編集
- **削除**: 
  - 削除時、紐づくタスクへの影響を警告
  - 「このノードを削除すると、タスク①は目的Bのみに紐づきます」
- **移動**: ドラッグ&ドロップで位置変更・階層変更

---

### 5.3 タスク管理
- **作成**:
  - タスクリストから直接作成
  - ノード詳細画面から「タスクを追加」
- **ノードへの紐付け**:
  - タスク編集時に「関連する目的」を複数選択(チェックリスト)
  - ドラッグ&ドロップでノードに追加(将来実装)
- **ステータス変更**: スワイプジェスチャー or 詳細画面
- **孤立タスク検出**: 
  - すべての紐付けノードが削除されたタスクを「未分類」として表示
  - 定期的な通知(オプション)

---

### 5.4 外部連携
- **Share Extension** (必須):
  - URLを受け取り、新規ノードまたは既存ノードに追加
  - テキストを受け取り、ノード/タスクとして保存
- **URL Open**:
  - ノード内のURLリンクタップ→システムブラウザで開く
  - アプリ内WebView表示(将来実装)

---

### 5.5 データのエクスポート/インポート (必須機能)

#### エクスポート

##### JSON形式
**用途**: 完全なバックアップ、他デバイスへの移行

**仕様**:
- 全データ(maps, nodes, tasks, links)を単一JSONファイルに出力
- ファイル名: `mindmap_backup_YYYYMMDD_HHmmss.json`
- 形式: UTF-8エンコーディング
- サンプル構造:
```json
{
  "version": "1.0.0",
  "exportedAt": 1739228400000,
  "maps": [...],
  "nodes": [...],
  "tasks": [...],
  "links": [...]
}
```

##### CSV形式
**用途**: スプレッドシートでの分析、外部ツールとの連携

**仕様**:
- 3つの個別CSVファイルを生成:
  - `nodes.csv`: ノード一覧
  - `tasks.csv`: タスク一覧
  - `links.csv`: リンク関係
- ファイル名: `mindmap_export_YYYYMMDD.zip` (3つのCSVを圧縮)
- 形式: UTF-8 BOM付き(Excel対応)
- カラム例(nodes.csv):
  ```
  id,mapId,title,description,url,type,createdAt,parentNodeIds,childNodeIds,linkedTaskIds
  ```

##### ZIP形式
**用途**: 添付ファイル(将来実装の画像等)を含む完全バックアップ

**仕様**:
- JSONファイル + 添付ファイルフォルダを圧縮
- ファイル名: `mindmap_backup_full_YYYYMMDD.zip`
- 構造:
  ```
  mindmap_backup_full_20260211.zip
  ├── data.json
  └── attachments/
      ├── node_uuid1_image.jpg
      └── node_uuid2_document.pdf
  ```

#### インポート

##### 対応形式
- **JSON**: 単一ファイル
- **CSV**: ZIPに圧縮された複数CSVファイル
- **ZIP**: JSONまたはCSVを含むアーカイブ

##### 処理フロー
1. ファイル選択(Files app / Document Picker)
2. 形式自動判別(拡張子 + 内容検証)
3. インポートモード選択:
   - **統合**: 既存データに追加(ID重複時はスキップ)
   - **上書き**: 既存データを削除して置換
   - **新規マップとして**: 新しいマップIDで追加
4. データ検証(スキーマチェック、参照整合性確認)
5. インポート実行
6. 完了レポート表示(成功件数、スキップ件数、エラー)

##### エラーハンドリング
- 不正なJSON/CSV形式→エラーメッセージ表示
- バージョン不一致→マイグレーション処理(将来実装)
- 参照整合性エラー(存在しないIDへのリンク)→警告表示&孤立要素として保持

---

### 5.6 検索・フィルタリング
- **全文検索**: ノード・タスクの全フィールドを対象
- **タグフィルタ**: タグによる絞り込み
- **目的別フィルタ**: 「目的Aに貢献するタスクのみ表示」
- **ステータスフィルタ**: ToDo/進行中/完了の切り替え
- **期限フィルタ**: 今日/今週/期限切れ

---

## 6. 技術スタック提案

### 6.1 フレームワーク・言語

#### クロスプラットフォーム開発 (推奨)
**React Native** + TypeScript

**理由**:
- iOS/Android同時開発でコスト削減
- JavaScriptエコシステムの豊富なライブラリ
- ネイティブモジュールでShare Extension対応可能

**代替案**:
- **Flutter** (Dart): パフォーマンス重視の場合
- **Kotlin Multiplatform**: ネイティブ寄りの実装が必要な場合

---

### 6.2 主要ライブラリ

#### マップ描画
- **react-native-svg** + **d3-force**: 力学モデルによる自動レイアウト
- または **react-native-graph-view**: グラフ構造特化
- **react-native-gesture-handler**: ピンチ/パン/ドラッグ操作
- **react-native-reanimated**: スムーズなアニメーション

#### データ管理
- **Zustand** or **Jotai**: 軽量な状態管理
- **WatermelonDB** or **Realm**: ローカルDB(高速な検索・フィルタ)
- **react-native-fs**: ファイルシステムアクセス(エクスポート/インポート)

#### UI コンポーネント
- **React Native Paper** or **NativeBase**: マテリアルデザインコンポーネント
- **react-navigation**: 画面遷移・タブナビゲーション
- **react-native-modal**: 全画面モーダル

#### その他
- **react-native-share**: Share Extension対応
- **react-native-document-picker**: ファイル選択
- **papaparse**: CSV解析
- **react-native-url-preview**: URLメタデータ取得(OGP)

---

### 6.3 データ永続化戦略

#### ローカルストレージ
- **WatermelonDB** (推奨):
  - SQLiteベース、リレーショナルDB
  - リアクティブクエリ(UI自動更新)
  - オフラインファースト設計

#### クラウド同期 (将来実装)
- **Supabase** or **Firebase**:
  - リアルタイム同期
  - ユーザー認証
  - バックエンドレス

---

## 7. 実装優先順位

### フェーズ1: MVP (最小実行可能プロダクト)
**目標**: 基本的な思考整理ができる状態

**スコープ**:
- [x] マップの作成・切り替え・削除
- [x] ノードの作成・編集・削除(シンプルなツリー構造)
- [x] タスクの作成・編集・完了
- [x] ノード↔タスクの1対多の紐付け
- [x] マップビュー(タブ1): 基本的なキャンバス表示
- [x] タスクリストビュー(タブ2): フラットなリスト
- [x] 全画面詳細ビュー(ノード/タスク)
- [x] ローカルストレージでのデータ永続化
- [x] **JSON形式でのエクスポート/インポート** (必須)
- [x] **CSV形式でのエクスポート/インポート** (必須)

**技術検証項目**:
- React Nativeでのキャンバス描画パフォーマンス
- ピンチズーム・パン操作の実装
- WatermelonDBのセットアップとリレーション定義

---

### フェーズ2: 多対多対応
**目標**: 現実的な思考の複雑さに対応

**スコープ**:
- [ ] タスク↔ノードの多対多リンク機能
- [ ] フォーカスモード(選択ノードの関連のみ表示)
- [ ] 孤立タスク/ノード検出
- [ ] リンク視覚化の改善(ハイライト、アニメーション)
- [ ] ノード・タスクへのURL添付機能
- [ ] **ZIP形式でのエクスポート/インポート** (必須)

---

### フェーズ3: 外部連携・UX向上
**目標**: 日常使いで快適な体験

**スコープ**:
- [ ] Share Extension (URL/テキストの共有受け取り)
- [ ] URLメタデータ自動取得(OGP)
- [ ] ドラッグ&ドロップ操作の洗練
- [ ] 詳細な検索・フィルタ機能
- [ ] タグ管理
- [ ] ダークモード対応
- [ ] 通知機能(期限リマインダー)

---

### フェーズ4: クラウド・協働機能 (将来構想)
**目標**: デバイス間同期と共有

**スコープ**:
- [ ] クラウド同期(Supabase/Firebase)
- [ ] マルチデバイス対応
- [ ] マップの共有リンク生成
- [ ] コラボレーション機能(リアルタイム共同編集)
- [ ] 画像・ファイル添付
- [ ] AIアシスト(関連ノード推薦、自動タグ付け)

---

## 8. データフォーマット仕様 (エクスポート/インポート)

### 8.1 JSON形式仕様

#### ファイル構造
```json
{
  "version": "1.0.0",
  "exportedAt": 1739228400000,
  "appInfo": {
    "name": "MindMapTaskApp",
    "platform": "iOS" | "Android",
    "deviceModel": "iPhone 15 Pro"
  },
  "maps": [
    {
      "id": "map-uuid-1",
      "title": "ビジネスアイデア",
      "description": "新規事業のアイデア整理",
      "createdAt": 1738000000000,
      "updatedAt": 1739000000000,
      "color": "#4A90E2",
      "nodeIds": ["node-uuid-1", "node-uuid-2"]
    }
  ],
  "nodes": [
    {
      "id": "node-uuid-1",
      "mapId": "map-uuid-1",
      "title": "サブスク型サービス",
      "description": "月額制で継続的な収益を得る仕組み",
      "url": "https://example.com/article",
      "urlMetadata": {
        "pageTitle": "サブスクリプションビジネスの成功法則",
        "favicon": "https://example.com/favicon.ico"
      },
      "type": "concept",
      "createdAt": 1738100000000,
      "updatedAt": 1738200000000,
      "position": { "x": 100, "y": 200 },
      "parentNodeIds": [],
      "childNodeIds": ["node-uuid-2"],
      "linkedTaskIds": ["task-uuid-1"],
      "metadata": {
        "color": "#E24A90",
        "icon": "💡",
        "collapsed": false
      }
    }
  ],
  "tasks": [
    {
      "id": "task-uuid-1",
      "title": "提案書作成",
      "description": "サブスクモデルの提案書をまとめる",
      "status": "in_progress",
      "priority": 2,
      "dueDate": 1739500000000,
      "linkedNodeIds": ["node-uuid-1", "node-uuid-3"],
      "tags": ["重要", "今週中"],
      "createdAt": 1738300000000,
      "updatedAt": 1738400000000,
      "completedAt": null
    }
  ],
  "links": [
    {
      "id": "link-uuid-1",
      "sourceId": "node-uuid-1",
      "targetId": "node-uuid-2",
      "type": "parent-child",
      "weight": 1.0,
      "createdAt": 1738150000000
    }
  ]
}
```

#### バージョニング
- `version`: セマンティックバージョニング (major.minor.patch)
- マイナーバージョンアップ: 後方互換性あり
- メジャーバージョンアップ: マイグレーション処理が必要

---

### 8.2 CSV形式仕様

#### nodes.csv
```csv
id,mapId,title,description,url,type,createdAt,updatedAt,parentNodeIds,childNodeIds,linkedTaskIds,color,icon
node-uuid-1,map-uuid-1,サブスク型サービス,月額制で継続的な収益を得る仕組み,https://example.com/article,concept,1738100000000,1738200000000,"","node-uuid-2","task-uuid-1",#E24A90,💡
```

#### tasks.csv
```csv
id,title,description,status,priority,dueDate,linkedNodeIds,tags,createdAt,updatedAt,completedAt
task-uuid-1,提案書作成,サブスクモデルの提案書をまとめる,in_progress,2,1739500000000,"node-uuid-1,node-uuid-3","重要,今週中",1738300000000,1738400000000,
```

#### links.csv
```csv
id,sourceId,targetId,type,weight,createdAt
link-uuid-1,node-uuid-1,node-uuid-2,parent-child,1.0,1738150000000
```

**注意事項**:
- 配列フィールド(parentNodeIds等)はカンマ区切りで連結
- 空配列は `""` (空文字列)
- エンコーディング: UTF-8 BOM付き(Excel互換性)

---

### 8.3 ZIP形式仕様

#### ディレクトリ構造
```
mindmap_backup_full_20260211.zip
├── data.json              # 完全なデータ
├── export_info.txt        # エクスポート情報(日時、デバイス等)
└── attachments/           # 添付ファイル(将来実装)
    ├── node-uuid-1/
    │   └── image.jpg
    └── task-uuid-2/
        └── document.pdf
```

#### export_info.txt (メタデータ)
```
Export Date: 2026-02-11 14:30:00 JST
App Version: 1.0.0
Data Version: 1.0.0
Platform: iOS 17.2
Device: iPhone 15 Pro
Total Maps: 3
Total Nodes: 45
Total Tasks: 28
Total Links: 67
```

---

## 9. 未解決の要検討事項

### 9.1 UIの詳細挙動
- [ ] マップの自動レイアウトアルゴリズム
  - **提案**: 初期は力学モデル(Force-Directed)、手動調整可能
- [ ] ノードの最小/最大サイズ
  - **提案**: タイトル長に応じて可変、最大幅は画面幅の80%
- [ ] タスクのドラッグ&ドロップでの優先度変更
  - **提案**: フェーズ3で実装

### 9.2 パフォーマンス最適化
- [ ] 大量ノード(100+)表示時の描画パフォーマンス
  - **提案**: 仮想化(画面外ノードは非描画)、LOD(Level of Detail)
- [ ] 検索の高速化
  - **提案**: WatermelonDBの全文検索インデックス活用

### 9.3 セキュリティ・プライバシー
- [ ] データの暗号化(ローカルストレージ)
  - **提案**: フェーズ4でオプション機能として実装
- [ ] クラウド同期時のE2E暗号化
  - **提案**: フェーズ4で検討

### 9.4 アクセシビリティ
- [ ] スクリーンリーダー対応
- [ ] ダイナミックタイプ(文字サイズ調整)
- [ ] ハイコントラストモード

---

## 10. 次のステップ: 開発着手前の最終確認

以下を確定してください:

### 10.1 技術選定
- [x] **React Native** で進めてよいか?
  - 代替案: Flutter, Swift(iOS) + Kotlin(Android)のネイティブ開発

### 10.2 初期スコープ
- [x] **フェーズ1 (MVP)** の範囲で合意できるか?
  - JSON/CSVエクスポート/インポートを含む

### 10.3 デザイン方向性
- [ ] UIデザインの好み: ミニマル / モダン / カラフル / ダーク系
  - **提案**: ミニマル&モダン(Notion, Linear風)

### 10.4 ターゲットOSバージョン
- [ ] iOS: 15.0+ / Android: 10.0+ (推奨)
  - より広範囲をサポートする場合はiOS 14.0+, Android 9.0+

---

## 11. 付録: 参考アプリ・ライブラリ

### 11.1 類似アプリ
- **MindNode** (iOS): マインドマップ特化
- **Notion**: データベース+リスト管理
- **Obsidian**: マークダウンベースのナレッジ管理
- **Workflowy**: アウトライン+タスク管理

### 11.2 技術参考
- **React Flow** (Webのみ): ノードベースエディタのUIパターン
- **d3-force**: グラフレイアウトアルゴリズム
- **WatermelonDB公式ドキュメント**: リレーション設計のベストプラクティス

---

## 12. まとめ

この仕様書は以下を明確化しています:

✅ **モバイルファースト**でのアプリ設計
✅ **複数マップ管理**による思考の分類
✅ **URL添付**など外部情報の統合
✅ **全画面詳細ビュー**によるモバイル最適化
✅ **JSON/CSV/ZIP形式のエクスポート/インポート** (必須機能)
✅ **多対多関係**の段階的な可視化戦略
✅ **MVP→段階的拡張**の実装ロードマップ

これで**生成AIに投げられるプロンプト**として機能します。次のステップは:

1. 技術スタックの最終確定
2. UIモックアップの作成(Figma等)
3. React Nativeプロジェクトのセットアップ
4. データモデルの実装(WatermelonDB)
5. MVP機能の段階的実装

---

**バージョン**: 1.0.0  
**最終更新**: 2026-02-11  
**作成者**: Claude (Anthropic)
